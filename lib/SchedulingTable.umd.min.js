(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["SchedulingTable"]=t(require("vue")):e["SchedulingTable"]=t(e["Vue"])})("undefined"!==typeof self?self:this,(function(e){return function(){"use strict";var t={82:function(e,t){t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[i,l]of t)n[i]=l;return n}},203:function(t){t.exports=e}},n={};function i(e){var l=n[e];if(void 0!==l)return l.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,i),o.exports}!function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.p=""}();var l={};return function(){if(i.r(l),i.d(l,{default:function(){return B}}),"undefined"!==typeof window){var e=window.document.currentScript,t=e&&e.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);t&&(i.p=t[1])}var n=i(203);const o={class:"float-left"},a={class:"week-table float-left clearfix"},r={class:"clearfix position-relative"},s={class:"parts"},c={class:"label"},d={class:"all-courses float-left"},m={class:"clearfix"},h=["onClick"],p={class:"course-content"},u={class:"actions clearfix"},f=["onClick"],y=["onClick"];function g(e,t,i,l,g,v){return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"course-table clearfix",style:(0,n.normalizeStyle)({width:`${v.tableWidth}px`})},[(0,n.createElementVNode)("div",o,[(0,n.createElementVNode)("div",{class:"top-table clearfix",style:(0,n.normalizeStyle)({height:`${g.dayHeight}px`,top:`${i.stickyTop}px`})},[(0,n.createElementVNode)("div",{class:"menu float-left",style:(0,n.normalizeStyle)({width:`${g.sectionWidth}px`})},null,4),(0,n.createElementVNode)("div",a,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(g.weekTable,((e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["day","float-left","content-center",i.showTimeline&&g.nowDay==t+1?"active":""]),key:t,style:(0,n.normalizeStyle)({width:`${g.dayWidth}px`})},(0,n.toDisplayString)(e),7)))),128))])],4),(0,n.createElementVNode)("div",r,[i.showTimeline?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:"now-timeline",style:(0,n.normalizeStyle)({top:`${g.nowTimelineTop}px`})},[(0,n.createElementVNode)("div",{class:"label",style:(0,n.normalizeStyle)({width:`${g.sectionWidth}px`})},(0,n.toDisplayString)(g.nowTimeStr),5),(0,n.createElementVNode)("div",{class:"now-point",style:(0,n.normalizeStyle)({left:`${g.sectionWidth+(g.nowDay>0?g.nowDay-1:0)*g.dayWidth}px`})},null,4)],4)):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",{class:"float-left section-table",style:(0,n.normalizeStyle)({width:`${g.sectionWidth}px`})},[(0,n.createElementVNode)("div",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(v.parts,((e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"section content-center",key:t,style:(0,n.normalizeStyle)({height:`${e.height}px`})},null,4)))),128))]),(0,n.createElementVNode)("div",s,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(v.markers,((e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:t,style:(0,n.normalizeStyle)({height:`${e.height}px`}),class:"part"},[(0,n.createElementVNode)("div",c,(0,n.toDisplayString)(e.label),1)],4)))),128))])],4),(0,n.createElementVNode)("div",d,[(0,n.createElementVNode)("div",m,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(g.weekTable,((e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["col","float-left",i.showTimeline&&g.nowDay==t+1?"active":""]),key:t,style:(0,n.normalizeStyle)({width:`${g.dayWidth}px`})},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(v.parts,((e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"cell",onClick:t=>v.add(e),key:t,style:(0,n.normalizeStyle)({height:`${e.height}px`})},null,12,h)))),128))],6)))),128))]),(0,n.createElementVNode)("div",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(i.modelValue,((e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:e.id,class:"course-wrap",style:(0,n.normalizeStyle)({width:`${g.dayWidth}px`,height:(60*(e.end[0]-e.start[0])+(e.end[1]-e.start[1]))*g.pixelOfMinutes+"px",left:(e.day-1)*g.dayWidth+"px",top:(60*(e.start[0]-v.parts.morning.start[0])+e.start[1])*g.pixelOfMinutes+"px"})},[(0,n.createElementVNode)("div",p,[(0,n.createElementVNode)("div",null,(0,n.toDisplayString)(e.name),1),(0,n.createElementVNode)("div",null,(0,n.toDisplayString)(v.formatTime(e.start[0]))+":"+(0,n.toDisplayString)(v.formatTime(e.start[1]))+" - "+(0,n.toDisplayString)(v.formatTime(e.end[0]))+":"+(0,n.toDisplayString)(v.formatTime(e.end[1])),1),(0,n.createElementVNode)("div",u,[(0,n.createElementVNode)("div",{onClick:e=>v.removeCourse(t),class:"action delete"}," 删除 ",8,f),(0,n.createElementVNode)("div",{onClick:e=>v.editCourse(t),class:"action edit"},"编辑",8,y)])])],4)))),128))])])])])],4)}var v={name:"SchedulingTable",emits:["update:modelValue","add","edit","remove"],props:{modelValue:null,showTimeline:{type:Boolean,default:!1},stickyTop:{type:Number,default:0}},data(){return{weekTable:["周一","周二","周三","周四","周五","周六","周日"],sectionTable:["早","上","下","晚"],sectionWidth:60,dayHeight:50,dayWidth:120,sectionHeight:100,pixelOfMinutes:1,nowTimelineTop:0,nowTimeStr:"00:00",nowDay:0,timer:null}},created(){this.timer=setInterval((()=>{const e=new Date,t=e.getHours(),n=e.getMinutes();t<this.parts.morning.start[0]||t>=this.parts.night.end[0]?this.nowTimelineTop=0:(this.nowDay=e.getDay(),this.nowTimelineTop=(60*(t-this.parts.morning.start[0])+n)*this.pixelOfMinutes,this.nowTimeStr=`${this.formatTime(t)}:${this.formatTime(n)}`)}),1e3)},computed:{markers(){const e=this.parts.morning.start[0],t=this.parts.night.end[0],n=[],i=60*this.pixelOfMinutes;for(let l=e;l<t;l++)n.push({label:`${this.formatTime(l)}:00`,height:i});return n},tableWidth(){const e=this.sectionWidth+this.weekTable.length*this.dayWidth;return e},tableHeight(){const e=this.dayHeight+this.morningHeight+this.forenoonHeight+this.afternoonHeight+this.nightHeight;return e},parts(){return{morning:{name:"早",height:180*this.pixelOfMinutes,start:[5,0],end:[8,0]},forenoon:{name:"上",height:300*this.pixelOfMinutes,start:[8,0],end:[13,0]},afternoon:{name:"下",height:300*this.pixelOfMinutes,start:[13,0],end:[18,0]},night:{name:"晚",height:300*this.pixelOfMinutes,start:[18,0],end:[23,0]}}}},methods:{formatTime(e){return e=""+e,e[1]?e:"0"+e},add(e){this.$emit("add",e)},editCourse(e){this.$emit("edit",e,this.modelValue[e])},removeCourse(e){this.$emit("remove",e,this.modelValue[e])}}},k=i(82);const x=(0,k.Z)(v,[["render",g],["__scopeId","data-v-76742ca2"]]);var w=x,T=w;const E={SchedulingTable:T},S=e=>{S.installed||(S.installed=!0,Object.keys(E).forEach((t=>e.component(t,E[t]))))};var b={install:S},B=b}(),l}()}));
//# sourceMappingURL=SchedulingTable.umd.min.js.map